@model FutureAgro.DataAccess.Models.Modulo

@{
    ViewData["Title"] = "Details";

    /*B-LimitesDetalle*/

/*Code injected by: LecturaTemp_LimitesIndex*/
double superiorTemp = (double)ViewData["TemperaturaLimiteSuperior"];
		double inferiorTemp = (double)ViewData["TemperaturaLimiteInferior"];
/*Code injected by: LecturaTemp_LimitesIndex*/

}
@section scripts{

    <!--B-ScriptsModulosHubDetalle-->

<!--Code injected by: ControlBase_ScriptsModulosHubDetalle-->
<script src="~/lib/signalr/signalr.js"></script>
		<script src="~/js/Hubs/BaseHub.js"></script>

		<!--B-ScriptsModulosDetalle-->

<!--Code injected by: Crecimiento_ScriptsModulosDetalle-->
<script src="~/js/Hubs/Crecimiento.js"></script>
<!--Code injected by: Crecimiento_ScriptsModulosDetalle-->


<!--Code injected by: PlantasMuertas_ScriptsModulosDetalle-->
<script src="~/js/Hubs/PlantasMuertas.js"></script>
<!--Code injected by: PlantasMuertas_ScriptsModulosDetalle-->


<!--Code injected by: LecturaTemp_ScriptsModulosIndex-->
<script>
			var superiorTemp = @superiorTemp;
			var inferiorTemp = @inferiorTemp;
		</script>
		<script src="~/js/Hubs/Temperatura.js"></script>
<!--Code injected by: LecturaTemp_ScriptsModulosIndex-->


		<script src="~/js/Hubs/ErrorHub.js"></script>
<!--Code injected by: ControlBase_ScriptsModulosHubDetalle-->

}
<div class="container-fluid">
    <h4>Modulo @Html.DisplayFor(model => model.IdModulo)</h4>

    <div>
        <a asp-action="Index">Lista</a>
        <!--B-BotonesModulosDetalle-->

<!--Code injected by: ControlAmbienteBase_BotonesModulosDetalle-->
|
		<a asp-action="Ambiente" asp-route-id="@Model.IdModulo">Ambiente</a>
<!--Code injected by: ControlAmbienteBase_BotonesModulosDetalle-->

    </div>
    <hr />
    <div class="row">
        <div class="col-7">
            <div class="card border-0">
                <h5>@Html.DisplayFor(model => model.Plantas.Count) Plantas</h5>
                <div class="card-body">

                    @foreach (var item in Model.Plantas)
                    {
                        <div class="media m-1 mt-2">
                            <img id="img-@item.IdPlanta" src="~/Images/@(item.Tipo.Nombre).png" height="100" width="100" class="mr-3 @(item.Viva?"":"disabled")" alt="Lechugas">
                            <div class="media-body">
                                <h5 class="media-title">@item.Tipo.Nombre @item.IdPlanta <span id="plantamuerta-@item.IdPlanta" class="text-danger @(item.Viva?"invisible":"")">Planta muerta</span></h5>
                                <!--B-DetallePlanta-->

<!--Code injected by: Crecimiento_DetallePlanta-->
Crecimiento
		<div class="progress mb-3">
			<div id="progrescrecimiento-@item.IdPlanta" class="progress-bar" role="progressbar" style="width:@(item.Viva?item.Crecimiento:0)%;"></div>
		</div>
<!--Code injected by: Crecimiento_DetallePlanta-->


<!--Code injected by: Produccion_DetallePlanta-->
<h6 class="mb-3">
			Tiempo para producción
			@{
				var crecimiento = item.Crecimiento;
				var color = item.Crecimiento <= 20 ? "light" : item.Crecimiento <= 40 ? "info" : item.Crecimiento <= 60 ? "success" : item.Crecimiento < 100 ? "warning" : "danger";

				var dias = (crecimiento * 0.35);
				var txtDias = "";
				if (dias >= 35)
				{
					txtDias = "Cosechar";
				}
				else
				{
					txtDias = Math.Round(35 - dias, 0).ToString() + " Días";
				}
			}
			<span id="spanTiempoProduccion-@item.IdPlanta" class="badge badge-@color @(item.Viva?"":"invisible")">@txtDias</span>
		</h6>
<!--Code injected by: Produccion_DetallePlanta-->

                            </div>
                        </div>
                        <hr />
                    }
                </div>
            </div>
        </div>
        <!--B-PanelModulosDetalle-->

<!--Code injected by: ControlAmbienteBase_PanelModulosDetalle-->
<div class="offset-1 col-4">
			<h5 class="mb-4">Control de ambiente</h5>
			<!--B-ControlAmbienteDetalleTemp-->

<!--Code injected by: LecturaTemp_ControlAmbienteDetalle-->
@{
			var colorTemp = Model.Temperatura <= superiorTemp && Model.Temperatura >= inferiorTemp ? "success" : "danger";
		}
		<div class="row">
			<h6 class="col-6"><i class="fas fa-thermometer-half"></i> Temperatura</h6>
			<!--B-ActuadorTemperatura-->

<!--Code injected by: ActuadorTemp_ActuadorTemperatura-->
<h6 class="col-6 text-right align-text-bottom small">
            <span class="mdl-switch__label" style="left:0;">Calefacción</span>
            <label class="mdl-switch mdl-js-switch mdl-js-ripple-effect w-25" for="switch-Calefaccion">
                <input type="checkbox" id="switch-Calefaccion" class="mdl-switch__input">
            </label>
        </h6>
<!--Code injected by: ActuadorTemp_ActuadorTemperatura-->

		</div>
		<table class="table">
			<tbody>
				<tr>
					<td><div class="badge badge-@colorTemp" id="divTemp-@Model.IdModulo">@Model.Temperatura°C</div></td>
				</tr>
			</tbody>
		</table>
<!--Code injected by: LecturaTemp_ControlAmbienteDetalle-->

			<!--B-ControlAmbienteDetalleHum-->
			<!--B-ControlAmbienteDetalleLum-->
		</div>
<!--Code injected by: ControlAmbienteBase_PanelModulosDetalle-->

    </div>

</div>
